<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html  xmlns:ui="http://java.sun.com/jsf/facelets"
       xmlns:h="http://java.sun.com/jsf/html"
       xmlns:p="http://primefaces.org/ui"
       xmlns="http://www.w3.org/1999/xhtml"         
       xmlns:f="http://java.sun.com/jsf/core"
       template="/WEB-INF/template.xhtml">

    <ui:composition template="/WEB-INF/template.xhtml">

        <ui:define name="conteudo">
            <h:form id="form">
                <p:panel header="Formulário para gerenciamento de Contas Pagar">

                    <p:panelGrid columns="2">
                        <p:outputLabel for="id" value="ID:"/>
                        <p:inputText id="id" value="#{contasPagarControle.contasPagar.id}" disabled="true"/>


                        <p:outputLabel  for="filial" value="Filial"/>
                        <p:autoComplete id="filial" required="true"
                                        completeMethod="#{fazendaControle.autoComplete}" size="26"
                                        var="est"
                                        itemLabel="#{est.nome}"
                                        itemValue="#{est.id.toString()}"
                                        converter="#{fazendaControle.converter()}"
                                        value="#{contasPagarControle.contasPagar.empresa}"
                                        queryDelay="500"
                                        dropdown="true"
                                        scrollHeight="350"
                                        style="margin-right: 30px;"/>

                        <p:outputLabel for="credor" value="Fornecedor"/>
                        <p:autoComplete id="credor" size="40"
                                        completeMethod="#{fornecedorControle.autoComplete}"
                                        var="cli"
                                        itemLabel="#{cli.nome}"
                                        itemValue="#{cli}"
                                        converter="#{pessoaControle.converter()}"
                                        value="#{contasPagarControle.contasPagar.pessoa}"
                                        queryDelay="500"
                                        dropdown="true"
                                        scrollHeight="350"
                                        style="margin-right: 30px;"/>


                        <p:outputLabel for="dtve" value="Data de Vencimento:"/>
                        <p:calendar id="dtve" value="#{contasPagarControle.contasPagar.dtVencimento}"
                                    required="true" readonly="true"
                                    pattern="dd/MM/yyyy"
                                    />


                        <p:outputLabel for="dtmovi" value="Data de Pagamento"/>
                        <p:calendar id="dtmovi" value="#{contasPagarControle.contasPagar.dtPagamento}"
                                    required="true" 
                                    pattern="dd/MM/yyyy"
                                    />

                        <p:outputLabel for="valor" value="Valor da Dívida:"/>
                        <p:inputText id="valor" value="#{contasPagarControle.contasPagar.valorPrincipal}" readonly="true"
                                     required="true" requiredMessage="O campo nome é obrigatório">
                            <f:convertNumber minFractionDigits="2" maxFractionDigits="2"/>
                        </p:inputText>

                        <p:outputLabel for="saldo" value="Saldo Devedor:"/>
                        <p:inputText id="saldo" value="#{contasPagarControle.contasPagar.valor}" readonly="true"
                                     required="true" requiredMessage="O campo nome é obrigatório">
                            <f:convertNumber minFractionDigits="2" maxFractionDigits="2"/>

                        </p:inputText>

                        <p:outputLabel for="juros" value="Juros:"/>
                        <p:inputText id="juros" value="#{contasPagarControle.contasPagar.juros}" 
                                     size="10" required="true" requiredMessage="O campo nome é obrigatório">

                            <f:convertNumber minFractionDigits="2" maxFractionDigits="2"/>
                        </p:inputText>

                        <p:outputLabel for="des" value="Desconto:"/>
                        <p:inputText id="des" value="#{contasPagarControle.contasPagar.desconto}" 
                                     size="10" required="true" requiredMessage="O campo desconto é obrigatório">
                            <f:convertNumber minFractionDigits="2" maxFractionDigits="2"/>
                        </p:inputText>



                        <p:outputLabel for="de" value="Cálculo"/>
                        <p:commandButton id="de" value="Calcular"
                                         actionListener="#{contasPagarControle.contasPagar.calculaTotal()}"
                                         update="valoraPagar restos"/>




                        <p:outputLabel for="valoraPagar" value="Valor a Pagar:"/>
                        <p:outputLabel id="valoraPagar" value="#{contasPagarControle.contasPagar.valor}" 
                                       >
                            <f:convertNumber minFractionDigits="2" maxFractionDigits="2"/>
                        </p:outputLabel>
                    </p:panelGrid>

                    <p:panelGrid columns="2">

                        <p:outputLabel for="valorPagar" value="Valor Pago:"/>
                        <p:inputText id="valorPagar" value="#{contasPagarControle.contasPagar.valorPago}">
                            <f:convertNumber minFractionDigits="2" maxFractionDigits="2"/>
                            <f:ajax event="keyup" render="restos" 
                                    listener="#{contasPagarControle.contasPagar.restos()}"/>
                        </p:inputText>

                        <p:outputLabel for="restos" value="Restos a Pagar:"/>
                        <p:inputText id="restos" value="#{contasPagarControle.contasPagar.restosAPagar}" 
                                     required="true"  requiredMessage="O campo nome é obrigatório">
                            <f:convertNumber minFractionDigits="2" maxFractionDigits="2"/>
                        </p:inputText>
                    </p:panelGrid>

                    <f:facet name="footer">
                        <p:commandButton id="btSalvar" value="Pagar" onclick="PF('form10').show();" 
                                         />

                        <p:commandButton value="Cancelar"
                                         action="list?faces-redirect=true"
                                         immediate="true"
                                         ajax="false"/>
                    </f:facet>
                </p:panel>



                <p:dialog header="Selecionar conta"  widgetVar="form10" modal="true" height="150" width="800">
                    <h:panelGrid  columns="3" id="painel12Busca" style="text-align:center; background-position: center">

                        <p:outputLabel value="Onde deseja lançar este débito?" style="color: black"/>
                    </h:panelGrid>
                    <h:panelGrid  columns="1" id="painelBu122sca" style="text-align:center; background-position: center">
                        <p:selectOneRadio id="tipoCompra2" value="#{contasPagarControle.contasPagar.tipoDocumento}">
                            <f:selectItem itemLabel="DINHEIRO" itemValue="DINHEIRO"/>
                            <f:selectItem itemLabel="CARTÃO DÉBITO" itemValue="CARTÃO DÉBITO"/>
                            <f:selectItem itemLabel="CARTÃO CRÉDITO" itemValue="CARTÃO CRÉDITO"/>
                            <f:selectItem itemLabel="CHEQUE" itemValue="CHEQUE"/>
                            <f:selectItem itemLabel="CONTA BANCÁRIA" itemValue="CONTA BANCÁRIA"/>
                            <f:ajax event="change" render="check2 cartao cartao1 painelBu2sca"/>

                        </p:selectOneRadio>
                    </h:panelGrid>

                    <h:panelGrid  columns="1" id="painelBu2sca" style="text-align:center; background-position: center">
                        <p:autoComplete id="conta" rendered="#{contasPagarControle.contasPagar.tipoDocumento == 'CONTA BANCÁRIA'}"
                                        completeMethod="#{contaBancariaControle.autoComplete}"
                                        var="est" size="30"
                                        itemLabel="#{est.nome}"
                                        itemValue="#{est}"
                                        converter="#{contaBancariaControle.converter()}"
                                        value="#{contasPagarControle.contaBancaria}"
                                        queryDelay="500"
                                        dropdown="true"
                                        style="margin-right: 30px;"
                                        >

                        </p:autoComplete>

                    </h:panelGrid>

                    <h:panelGrid  columns="7" id="check2" style="text-align:right; background-position: right">

                        <p:outputLabel for="caixa" value="Banco:" rendered="#{contasPagarControle.contasPagar.tipoDocumento == 'CHEQUE'}"/>
                        <p:selectOneMenu id="caixa" requiredMessage="O Banco é obrigatório" rendered="#{contasPagarControle.contasPagar.tipoDocumento == 'CHEQUE'}"
                                         value="#{contasPagarControle.contasPagar.banco}" 
                                         converter="#{bancoControle.converter()}">

                            <f:selectItem itemLabel="-- Selecione --"
                                          itemValue="0"/>

                            <f:selectItems value="#{bancoControle.listaBancos}"
                                           var="grup"
                                           itemLabel="#{grup.nome}"
                                           itemValue="#{grup}"/>
                        </p:selectOneMenu>


                        <p:outputLabel value="N° Cheque" style="color: black" rendered="#{contasPagarControle.contasPagar.tipoDocumento == 'CHEQUE'}"/>
                        <p:inputText id="check" value="#{contasPagarControle.contasPagar.numDoc}" 
                                     rendered="#{contasPagarControle.contasPagar.tipoDocumento == 'CHEQUE'}"/>
                        <p:outputLabel  value="Data de Vencimento:" style="color: black" rendered="#{contasPagarControle.contasPagar.tipoDocumento == 'CHEQUE'}"/>
                        <p:calendar id="check1" value="#{contasPagarControle.contasPagar.dtVencimentoFatura}" 
                                    rendered="#{contasPagarControle.contasPagar.tipoDocumento == 'CHEQUE'}"/>
                    </h:panelGrid>

                    <h:panelGrid  columns="4" id="cartao" style="text-align:right; background-position: right">

                        <p:outputLabel value="Data Vencimento da Fatura:" style="color: black"
                                       rendered="#{contasPagarControle.contasPagar.tipoDocumento == 'CARTÃO CRÉDITO'}"/>
                        <p:calendar id="check12" value="#{contasPagarControle.contasPagar.dtVencimentoFatura}" 
                                    rendered="#{contasPagarControle.contasPagar.tipoDocumento == 'CARTÃO CRÉDITO'}"/>


                        <p:outputLabel for="ban1" value="Bandeira:"  rendered="#{contasPagarControle.contasPagar.tipoDocumento == 'CARTÃO CRÉDITO'}" style="color: black"/>
                        <p:autoComplete id="ban1" rendered="#{contasPagarControle.contasPagar.tipoDocumento == 'CARTÃO CRÉDITO'}"
                                        completeMethod="#{bandeiraControle.autoComplete}"
                                        var="est"
                                        itemLabel="#{est.nome}"
                                        itemValue="#{est}"
                                        converter="#{bandeiraControle.converter()}"
                                        value="#{contasPagarControle.contasPagar.bandeira}"
                                        queryDelay="500"
                                        dropdown="true"
                                        style="margin-right: 30px;"
                                        >

                        </p:autoComplete>


                    </h:panelGrid>

                    <h:panelGrid  columns="2" id="cartao1" style="text-align:right; background-position: right">

                        <p:outputLabel for="ban11" value="Bandeira:"  rendered="#{contasPagarControle.contasPagar.tipoDocumento == 'CARTÃO DÉBITO'}"/>
                        <p:autoComplete id="ban11" rendered="#{contasPagarControle.contasPagar.tipoDocumento == 'CARTÃO DÉBITO'}"
                                        completeMethod="#{bandeiraControle.autoComplete}"
                                        var="est"
                                        itemLabel="#{est.nome}"
                                        itemValue="#{est}"
                                        converter="#{bandeiraControle.converter()}"
                                        value="#{contasPagarControle.contasPagar.bandeira}"
                                        queryDelay="500"
                                        dropdown="true"
                                        style="margin-right: 30px;"
                                        >

                        </p:autoComplete>


                    </h:panelGrid>


                    <br/>
                    <p:commandButton value="Confirmar" action="#{contasPagarControle.salvar1()}" />






                </p:dialog>


            </h:form>
        </ui:define>


    </ui:composition>

</html>